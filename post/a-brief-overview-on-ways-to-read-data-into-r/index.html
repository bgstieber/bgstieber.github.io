<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>An Introduction to Reading Data into R</title>
  <meta property="og:title" content="An Introduction to Reading Data into R" />
  <meta name="twitter:title" content="An Introduction to Reading Data into R" />
  <meta name="description" content="This post was originally meant for the R Users Group at my organization. I thought it would be worthwhile to have it on my blog as well, in case anyone out there is searching for a tutorial on reading data into R.
There are a lot of different ways to get data into R, and this post highlights a few of the common ways of doing that. This post assumes you have some flat file of data (e.">
  <meta property="og:description" content="This post was originally meant for the R Users Group at my organization. I thought it would be worthwhile to have it on my blog as well, in case anyone out there is searching for a tutorial on reading data into R.
There are a lot of different ways to get data into R, and this post highlights a few of the common ways of doing that. This post assumes you have some flat file of data (e.">
  <meta name="twitter:description" content="This post was originally meant for the R Users Group at my organization. I thought it would be worthwhile to have it on my blog as well, in case anyone out there is searching for a tutorial on reading …">
  <meta name="author" content="Brad Stieber"/>
  <link href='/img/favicon2.ico' rel='icon' type='image/x-icon'/>
  <meta property="og:image" content="/img/brad-avatar.png" />
  <meta name="twitter:image" content="/img/brad-avatar.png" />
  <meta name="twitter:card" content="summary" />
  <meta property="og:url" content="/post/a-brief-overview-on-ways-to-read-data-into-r/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Brad Stieber" />

  <meta name="generator" content="Hugo 0.41" />
  <link rel="canonical" href="/post/a-brief-overview-on-ways-to-read-data-into-r/" />
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="Brad Stieber">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="/css/highlight.min.css" /><link rel="stylesheet" href="/css/codeblock.css" />




<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">



<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-119936954-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>

</head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Brad Stieber</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Posts" href="/post">Posts</a>
            </li>
          
        
          
            <li>
              <a title="About Me" href="/about">About Me</a>
            </li>
          
        
          
            <li>
              <a title="Blogroll" href="/blogroll">Blogroll</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/tags">Tags</a>
            </li>
          
        

        

        
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
          <a title="Brad Stieber" href="/">
            <img class="avatar-img" src="/img/brad-avatar.png" alt="Brad Stieber" />
          </a>
        
      </div>
    </div>

  </div>
</nav>




    
  
  
  




  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              <h1>An Introduction to Reading Data into R</h1>
                
                
                  <span class="post-meta">
  
  
  <i class="fa fa-calendar-o"></i>&nbsp;Posted on February 2, 2020
  
  
  
</span>


                
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <p>This post was originally meant for the R Users Group at my organization. I thought it would be worthwhile to have it on my blog as well, in case anyone out there is searching for a tutorial on reading data into R.</p>
<p>There are a lot of different ways to get data into R, and this post highlights a few of the common ways of doing that. This post assumes you have some flat file of data (e.g. csv, txt, excel) you’re trying to read into R. Maybe I’ll write a follow-up post where the data is in a less common format.</p>
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>Today, we’re going to be taking a quick ride through a few ways to get data from flat files (txt, csv, excel) into R.</p>
<p>Here are links to the documentation for each of the functions discussed.</p>
<ul>
<li><a href="https://stat.ethz.ch/R-manual/R-devel/library/utils/html/read.table.html"><code>read.table</code></a></li>
<li><a href="https://readr.tidyverse.org/reference/read_delim.html"><code>readr::read_delim</code></a></li>
<li><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html"><code>data.table::fread</code></a></li>
<li><a href="https://readxl.tidyverse.org/reference/read_excel.html"><code>readxl::read_excel</code></a></li>
</ul>
<p>You can find all the code and data <a href="https://github.com/bgstieber/wfaa_rug_2020_01_24">on my GitHub</a>. If you <a href="https://help.github.com/en/desktop/contributing-to-projects/cloning-a-repository-from-github-to-github-desktop">clone that repository</a> you should be able to run all of this on your own machine.</p>
</div>
<div id="examples" class="section level2 tabset tabset-pills">
<h2>Examples</h2>
<div id="read.csv---basics" class="section level3">
<h3>read.csv - basics</h3>
<p>The first function you probably used to read data into R was <a href="https://stat.ethz.ch/R-manual/R-devel/library/utils/html/read.table.html"><code>read.csv</code></a>.</p>
<p>Let’s suppose you get a basic flat file</p>
<pre><code>&quot;Sepal.Length&quot;,&quot;Sepal.Width&quot;,&quot;Petal.Length&quot;,&quot;Petal.Width&quot;,&quot;Species&quot;
5.1,3.5,1.4,0.2,&quot;setosa&quot;
4.9,3,1.4,0.2,&quot;setosa&quot;
4.7,3.2,1.3,0.2,&quot;setosa&quot;
4.6,3.1,1.5,0.2,&quot;setosa&quot;
5,3.6,1.4,0.2,&quot;setosa&quot;
5.4,3.9,1.7,0.4,&quot;setosa&quot;</code></pre>
<p>Using <code>read.csv</code> results in:</p>
<pre class="r"><code>dat &lt;- read.csv(&quot;data/iris.txt&quot;)
tail(dat)</code></pre>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p>But wait, something weird happened with <code>Species</code>:</p>
<pre class="r"><code>dat$Species</code></pre>
<pre><code>## [1] setosa setosa setosa setosa setosa setosa
## Levels: setosa</code></pre>
<p><code>read.csv</code> has an argument called <code>stringsAsFactors</code>, and its default is TRUE. This means that any string/character type columns you have in your data will be converted to factors (further reading: <a href="https://simplystatistics.org/2015/07/24/stringsasfactors-an-unauthorized-biography/">stringsAsFactors: An unauthorized biography</a>). This is generally not what we want.</p>
<p>So, in the event that I use <code>read.csv</code> (I typically prefer <code>readr::read_csv</code> or <code>data.table::fread</code>, discussed below), I set <code>stringsAsFactors = FALSE</code>.</p>
<pre class="r"><code>dat2 &lt;- read.csv(&quot;data/iris.txt&quot;, stringsAsFactors = FALSE)
dat2$Species</code></pre>
<pre><code>## [1] &quot;setosa&quot; &quot;setosa&quot; &quot;setosa&quot; &quot;setosa&quot; &quot;setosa&quot; &quot;setosa&quot;</code></pre>
<p><code>read.csv</code> works really well without specifying many arguments when your data is nice. What happens if your data is a little messier?</p>
</div>
<div id="read.table---column-headers-are-separated-weird-delimiter" class="section level3">
<h3>read.table - Column headers are separated, weird delimiter</h3>
<p>Here’s the data:</p>
<pre><code>&quot;Sepal.Length&quot;|&quot;Sepal.Width&quot;|&quot;Petal.Length&quot;|&quot;Petal.Width&quot;|&quot;Species&quot;
-----------------------------------------------------------------
----------------------------------------------------------------- 
5.1|3.5|1.4|0.2|&quot;setosa&quot;
4.9|3|1.4|0.2|&quot;setosa&quot;
4.7|3.2|1.3|0.2|&quot;setosa&quot;
4.6|3.1|1.5|0.2|&quot;setosa&quot;
5|3.6|1.4|0.2|&quot;setosa&quot;
5.4|3.9|1.7|0.4|&quot;setosa&quot;</code></pre>
<p>Two things are weird with this data</p>
<ol style="list-style-type: decimal">
<li>Column headers are separated from the data with two rows <code>---</code>
<ul>
<li>Use <code>skip</code> argument</li>
</ul></li>
<li>A pipe (<code>|</code>) delimiter is used
<ul>
<li>Use <code>sep = "|"</code> argument</li>
</ul></li>
</ol>
<p>These two oddities require that we use <code>read.table</code> instead of <code>read.csv</code>.</p>
<pre class="r"><code># first, get column names from first row of data
column_names &lt;- read.table(&quot;data/iris_pipe_delim_edit.txt&quot;,
                           sep = &quot;|&quot;, # pipe delim
                           nrows = 1, # only read first row
                           stringsAsFactors = FALSE,
                           header = FALSE) # no headers
# convert to a character vector
(column_names &lt;- as.character(column_names))</code></pre>
<pre><code>## [1] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot;  &quot;Petal.Length&quot; &quot;Petal.Width&quot; 
## [5] &quot;Species&quot;</code></pre>
<pre class="r"><code># then, read in remaining rows, using `skip` argument
full_data &lt;- read.table(&quot;data/iris_pipe_delim_edit.txt&quot;,
                        sep = &quot;|&quot;,
                        skip = 3, # skip first 3 rows
                        stringsAsFactors = FALSE,
                        col.names = column_names) # specify column names

tail(full_data)</code></pre>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
<div id="read.csv---missing-values-are-coded-strangely" class="section level3">
<h3>read.csv - Missing Values are Coded Strangely</h3>
<p>What if our data has weird missing value codes, maybe due to human input.</p>
<pre><code>&quot;Sepal.Length&quot;,&quot;Sepal.Width&quot;,&quot;Petal.Length&quot;,&quot;Petal.Width&quot;,&quot;Species&quot;
5.1,3.5,1.4,0.2,&quot;setosa&quot;
4.9,3,1.4,0.2,&quot;setosa&quot;
4.7,3.2,NULL,0.2,&quot;setosa&quot;
4.6,3.1,1.5,0.2,&quot;setosa&quot;
5,MISSING,1.4,0.2,&quot;setosa&quot;
5.4,3.9,9999,0.4,&quot;setosa&quot;</code></pre>
<p>By default, when you’re reading in data with the <code>read.table</code>/<code>read.csv</code> family of functions, R treats any columns containing the string <code>"NA"</code> as an <code>NA</code> value. Sometimes we have missing values that take other values, like <code>999</code>, <code>""</code>, and <code>NULL</code>. Using the <code>na.strings</code> argument can help us with this.</p>
<pre class="r"><code>dat_default_NA &lt;- read.csv(&quot;data/iris_weird_NA_edit.txt&quot;, 
                           stringsAsFactors = FALSE)

dat_default_NA$Sepal.Width</code></pre>
<pre><code>## [1] &quot;3.5&quot;     &quot;3&quot;       &quot;3.2&quot;     &quot;3.1&quot;     &quot;MISSING&quot; &quot;3.9&quot;</code></pre>
<pre class="r"><code>dat_default_NA$Petal.Length</code></pre>
<pre><code>## [1] &quot;1.4&quot;  &quot;1.4&quot;  &quot;NULL&quot; &quot;1.5&quot;  &quot;1.4&quot;  &quot;9999&quot;</code></pre>
<p>Since <code>R</code> found character values in the <code>Sepal.Width</code> and <code>Petal.Length</code> columns, it treats those as characters. We know this is wrong, and can fix it using <code>na.strings</code>.</p>
<pre class="r"><code>dat_default_NA &lt;- read.csv(&quot;data/iris_weird_NA_edit.txt&quot;,
                           stringsAsFactors = FALSE,
                           na.strings = c(&quot;NULL&quot;, &quot;9999&quot;, &quot;MISSING&quot;))

dat_default_NA$Sepal.Width</code></pre>
<pre><code>## [1] 3.5 3.0 3.2 3.1  NA 3.9</code></pre>
<pre class="r"><code>dat_default_NA$Petal.Length</code></pre>
<pre><code>## [1] 1.4 1.4  NA 1.5 1.4  NA</code></pre>
</div>
<div id="readrread_csv" class="section level3">
<h3>readr::read_csv</h3>
<pre class="r"><code>library(readr)</code></pre>
<p>The next function I want to talk about is <code>read_csv</code> from the <a href="https://readr.tidyverse.org/"><strong><code>readr</code></strong></a> package.</p>
<p>This function is really helpful, <strong>and it’s pretty much my go-to function to read in flat files into R</strong>. It has good and well-reasoned defaults (no <code>stringsAsFactors = FALSE</code>!), and reads in the data as a <a href="https://tibble.tidyverse.org/"><code>tibble</code></a> as opposed to a <code>data.frame</code>. This makes printing the data to your console a lot better.</p>
<p>Rather than looking at the boring iris data, we’ll instead read some data from the internet. Yes, if you give one of the <code>read</code> functions (even <code>read.table</code>!) a url with a csv/txt file, it will be able to read that into R (conditional on you having a connection to the internet).</p>
<pre class="r"><code>u1 &lt;- &quot;https://raw.githubusercontent.com/fivethirtyeight/data&quot;

u2 &lt;- &quot;/master/college-majors/all-ages.csv&quot;

(u &lt;- paste0(u1, u2))</code></pre>
<pre><code>## [1] &quot;https://raw.githubusercontent.com/fivethirtyeight/data/master/college-majors/all-ages.csv&quot;</code></pre>
<pre class="r"><code>college_data &lt;- read_csv(u) # informative parsing printing</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   Major_code = col_double(),
##   Major = col_character(),
##   Major_category = col_character(),
##   Total = col_double(),
##   Employed = col_double(),
##   Employed_full_time_year_round = col_double(),
##   Unemployed = col_double(),
##   Unemployment_rate = col_double(),
##   Median = col_double(),
##   P25th = col_double(),
##   P75th = col_double()
## )</code></pre>
<pre class="r"><code>college_data # nice printing of data, don&#39;t need head() or tail()</code></pre>
<pre><code>## # A tibble: 173 x 11
##    Major_code Major Major_category  Total Employed Employed_full_t~
##         &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;           &lt;dbl&gt;    &lt;dbl&gt;            &lt;dbl&gt;
##  1       1100 GENE~ Agriculture &amp;~ 128148    90245            74078
##  2       1101 AGRI~ Agriculture &amp;~  95326    76865            64240
##  3       1102 AGRI~ Agriculture &amp;~  33955    26321            22810
##  4       1103 ANIM~ Agriculture &amp;~ 103549    81177            64937
##  5       1104 FOOD~ Agriculture &amp;~  24280    17281            12722
##  6       1105 PLAN~ Agriculture &amp;~  79409    63043            51077
##  7       1106 SOIL~ Agriculture &amp;~   6586     4926             4042
##  8       1199 MISC~ Agriculture &amp;~   8549     6392             5074
##  9       1301 ENVI~ Biology &amp; Lif~ 106106    87602            65238
## 10       1302 FORE~ Agriculture &amp;~  69447    48228            39613
## # ... with 163 more rows, and 5 more variables: Unemployed &lt;dbl&gt;,
## #   Unemployment_rate &lt;dbl&gt;, Median &lt;dbl&gt;, P25th &lt;dbl&gt;, P75th &lt;dbl&gt;</code></pre>
<p><code>read_csv</code> has a few arguments I should highlight:</p>
<ul>
<li><strong><code>na</code></strong>: Character vector of strings to interpret as missing values. (this is like <code>na.strings</code> in <code>read.csv</code>)</li>
<li><strong><code>skip</code></strong>: Number of lines to skip before reading data.</li>
<li><strong><code>n_max</code></strong>: Maximum number of records to read.</li>
<li><strong><code>col_types</code></strong>: allows you to specify the column types for your data. <strong>I typically leave this as is, and let the parser do its job</strong>, but it can be helpful if you’re trying to coerce a certain column to certain data type</li>
</ul>
</div>
<div id="data.tablefread" class="section level3">
<h3>data.table::fread</h3>
<pre class="r"><code>library(data.table)</code></pre>
<p>Now, sometimes you might be dealing with some really nasty data that is large and unwieldy. <code>read_csv</code> is good for maybe 80-90% of data files, but sometimes we need something more powerful.</p>
<p>There is where the <code>fread</code> function from the <a href="https://rdatatable.gitlab.io/data.table/"><strong><code>data.table</code></strong></a> package comes in handy (further reading: <a href="https://github.com/Rdatatable/data.table/wiki/Convenience-features-of-fread">Convenience features of fread</a>).</p>
<p>By <a href="https://jozef.io/r917-fread-comparisons/">some measures</a>, <code>fread</code> can be about 6 times faster than <code>read.csv</code> and about 2.5 times faster than <code>read_csv</code>.</p>
<p>One of the best parts of <code>fread</code> is that you do not necessarily have to specify the delimiter in your data.</p>
<p>For example, the pipe delimited data from above is read in easily. In the code below I set <code>verbose = TRUE</code> to show the internal output from <code>fread</code>. In general, I’d recommend you leave this as FALSE, unless you’re in serious debug mode.</p>
<pre class="r"><code>pipe_dat &lt;- fread(&quot;data/iris_pipe_delim_edit.txt&quot;,
                  skip = 3, # homework: what happens if you don&#39;t specify skip?
                  verbose = TRUE, # default is FALSE, which I recommend
                  col.names = names(iris))</code></pre>
<pre><code>## omp_get_num_procs()==8
## R_DATATABLE_NUM_PROCS_PERCENT==&quot;&quot; (default 50)
## R_DATATABLE_NUM_THREADS==&quot;&quot;
## omp_get_thread_limit()==2147483647
## omp_get_max_threads()==8
## OMP_THREAD_LIMIT==&quot;&quot;
## OMP_NUM_THREADS==&quot;&quot;
## data.table is using 4 threads. This is set on startup, and by setDTthreads(). See ?setDTthreads.
## RestoreAfterFork==true
## Input contains no \n. Taking this to be a filename to open
## [01] Check arguments
##   Using 4 threads (omp_get_max_threads()=8, nth=4)
##   NAstrings = [&lt;&lt;NA&gt;&gt;]
##   None of the NAstrings look like numbers.
##   skip num lines = 3
##   show progress = 0
##   0/1 column will be read as integer
## [02] Opening the file
##   Opening file data/iris_pipe_delim_edit.txt
##   File opened, size = 356 bytes.
##   Memory mapped ok
## [03] Detect and skip BOM
## [04] Arrange mmap to be \0 terminated
##   \n has been found in the input and different lines can end with different line endings (e.g. mixed \n and \r\n in one file). This is common and ideal.
## [05] Skipping initial rows if needed
##   Skipped to line 4 in the file  Positioned on line 4 starting: &lt;&lt;5.1|3.5|1.4|0.2|&quot;setosa&quot;&gt;&gt;
## [06] Detect separator, quoting rule, and ncolumns
##   Detecting sep automatically ...
##   sep=&#39;|&#39;  with 6 lines of 5 fields using quote rule 0
##   Detected 5 columns on line 4. This line is either column names or first data row. Line starts as: &lt;&lt;5.1|3.5|1.4|0.2|&quot;setosa&quot;&gt;&gt;
##   Quote rule picked = 0
##   fill=false and the most number of columns found is 5
## [07] Detect column types, good nrow estimate and whether first row is column names
##   Number of sampling jump points = 1 because (150 bytes from row 1 to eof) / (2 * 150 jump0size) == 0
##   Type codes (jump 000)    : 7777A  Quote rule 0
##   &#39;header&#39; determined to be false because there are some number columns and those columns do not have a string field at the top of them
##   All rows were sampled since file is small so we know nrow=6 exactly
## [08] Assign column names
## [09] Apply user overrides on column types
##   After 0 type and 0 drop user overrides : 7777A
## [10] Allocate memory for the datatable
##   Allocating 5 column slots (5 - 0 dropped) with 6 rows
## [11] Read the data
##   jumps=[0..1), chunk_size=1048576, total_size=150
## Read 6 rows x 5 columns from 356 bytes file in 00:00.000 wall clock time
## [12] Finalizing the datatable
##   Type counts:
##          4 : float64   &#39;7&#39;
##          1 : string    &#39;A&#39;
## =============================
##    0.000s (  0%) Memory map 0.000GB file
##    0.000s (  0%) sep=&#39;|&#39; ncol=5 and header detection
##    0.000s (  0%) Column type detection using 6 sample rows
##    0.000s (  0%) Allocation of 6 rows x 5 cols (0.000GB) of which 6 (100%) rows used
##    0.000s (  0%) Reading 1 chunks (0 swept) of 1.000MB (each chunk 6 rows) using 1 threads
##    +    0.000s (  0%) Parse to row-major thread buffers (grown 0 times)
##    +    0.000s (  0%) Transpose
##    +    0.000s (  0%) Waiting
##    0.000s (  0%) Rereading 0 columns due to out-of-sample type exceptions
##    0.000s        Total</code></pre>
<pre class="r"><code>pipe_dat</code></pre>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1:          5.1         3.5          1.4         0.2  setosa
## 2:          4.9         3.0          1.4         0.2  setosa
## 3:          4.7         3.2          1.3         0.2  setosa
## 4:          4.6         3.1          1.5         0.2  setosa
## 5:          5.0         3.6          1.4         0.2  setosa
## 6:          5.4         3.9          1.7         0.4  setosa</code></pre>
<p>Here’s a demonstration of how much faster <code>fread</code> is than <code>read.csv</code> and <code>read_csv</code> using a subset of the flights data set.</p>
<pre class="r"><code>u1 &lt;- &quot;https://github.com/roberthryniewicz/datasets/&quot;
u2 &lt;- &quot;blob/master/airline-dataset/flights/flights.csv?raw=true&quot;
(uu &lt;- paste0(u1, u2))</code></pre>
<pre><code>## [1] &quot;https://github.com/roberthryniewicz/datasets/blob/master/airline-dataset/flights/flights.csv?raw=true&quot;</code></pre>
<pre class="r"><code>system.time(dat_base &lt;- read.csv(uu)) # timing for read.csv</code></pre>
<pre><code>##    user  system elapsed 
##   15.45    0.15   17.36</code></pre>
<pre class="r"><code>system.time(dat_readr &lt;- read_csv(uu)) # timing for read_csv</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   .default = col_double(),
##   UniqueCarrier = col_character(),
##   TailNum = col_character(),
##   Origin = col_character(),
##   Dest = col_character(),
##   CancellationCode = col_character()
## )</code></pre>
<pre><code>## See spec(...) for full column specifications.</code></pre>
<pre><code>##    user  system elapsed 
##    0.67    0.18    3.29</code></pre>
<pre class="r"><code>system.time(dat_fread &lt;- fread(uu)) # timing for fread</code></pre>
<pre><code>##    user  system elapsed 
##    0.38    0.07    1.89</code></pre>
<pre class="r"><code>dim(dat_fread) # rows by columns</code></pre>
<pre><code>## [1] 100000     29</code></pre>
<p>I would strongly encourage you to spend some time playing around with <code>fread</code>, and thoroughly investigate its arguments (it’s got a lot!).</p>
<p>Considering all the benefits of <code>fread</code>, I’m actually surprised I don’t use it more.</p>
</div>
<div id="readxlread_excel" class="section level3">
<h3>readxl::read_excel</h3>
<pre class="r"><code>library(readxl)</code></pre>
<p>Maybe you’ve been unlucky enough to have to do some analysis using an excel file. This used to be a tedious task to get the data into R. Now, we can use the <code>read_excel</code> function from the <a href="https://readxl.tidyverse.org/index.html"><strong><code>readxl</code></strong></a> package.</p>
<p>Excel files will typically have multiple sheets. The <a href="https://community.tableau.com/servlet/JiveServlet/downloadBody/1236-102-2-15278/Sample%20-%20Superstore.xls">excel example</a> we’re looking at today has three separate sheets.</p>
<p>Reading these in is straightforward, using the <code>read_excel</code> function and the <code>sheet</code> argument.</p>
<pre class="r"><code>orders &lt;- read_excel(&quot;data/Superstore.xls&quot;,
                     sheet = &quot;Orders&quot;)</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i =
## sheet, : Coercing text to numeric in L2236 / R2236C12: &#39;05408&#39;</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i =
## sheet, : Coercing text to numeric in L5276 / R5276C12: &#39;05408&#39;</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i =
## sheet, : Coercing text to numeric in L8800 / R8800C12: &#39;05408&#39;</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i =
## sheet, : Coercing text to numeric in L9148 / R9148C12: &#39;05408&#39;</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i =
## sheet, : Coercing text to numeric in L9149 / R9149C12: &#39;05408&#39;</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i =
## sheet, : Coercing text to numeric in L9150 / R9150C12: &#39;05408&#39;</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i =
## sheet, : Coercing text to numeric in L9388 / R9388C12: &#39;05408&#39;</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i =
## sheet, : Coercing text to numeric in L9389 / R9389C12: &#39;05408&#39;</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i =
## sheet, : Coercing text to numeric in L9390 / R9390C12: &#39;05408&#39;</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i =
## sheet, : Coercing text to numeric in L9391 / R9391C12: &#39;05408&#39;</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i =
## sheet, : Coercing text to numeric in L9743 / R9743C12: &#39;05408&#39;</code></pre>
<pre class="r"><code>tail(orders)</code></pre>
<pre><code>## # A tibble: 6 x 21
##   `Row ID` `Order ID` `Order Date`        `Ship Date`         `Ship Mode`
##      &lt;dbl&gt; &lt;chr&gt;      &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt;      
## 1     9989 CA-2017-1~ 2017-11-17 00:00:00 2017-11-21 00:00:00 Standard C~
## 2     9990 CA-2014-1~ 2014-01-21 00:00:00 2014-01-23 00:00:00 Second Cla~
## 3     9991 CA-2017-1~ 2017-02-26 00:00:00 2017-03-03 00:00:00 Standard C~
## 4     9992 CA-2017-1~ 2017-02-26 00:00:00 2017-03-03 00:00:00 Standard C~
## 5     9993 CA-2017-1~ 2017-02-26 00:00:00 2017-03-03 00:00:00 Standard C~
## 6     9994 CA-2017-1~ 2017-05-04 00:00:00 2017-05-09 00:00:00 Second Cla~
## # ... with 16 more variables: `Customer ID` &lt;chr&gt;, `Customer Name` &lt;chr&gt;,
## #   Segment &lt;chr&gt;, Country &lt;chr&gt;, City &lt;chr&gt;, State &lt;chr&gt;, `Postal
## #   Code` &lt;dbl&gt;, Region &lt;chr&gt;, `Product ID` &lt;chr&gt;, Category &lt;chr&gt;,
## #   `Sub-Category` &lt;chr&gt;, `Product Name` &lt;chr&gt;, Sales &lt;dbl&gt;,
## #   Quantity &lt;dbl&gt;, Discount &lt;dbl&gt;, Profit &lt;dbl&gt;</code></pre>
<pre class="r"><code>returns &lt;- read_excel(&quot;data/Superstore.xls&quot;,
                      sheet = &quot;Returns&quot;)

tail(returns)</code></pre>
<pre><code>## # A tibble: 6 x 2
##   Returned `Order ID`    
##   &lt;chr&gt;    &lt;chr&gt;         
## 1 Yes      US-2016-140172
## 2 Yes      CA-2015-101910
## 3 Yes      CA-2017-156958
## 4 Yes      CA-2016-105585
## 5 Yes      CA-2016-148796
## 6 Yes      CA-2015-149636</code></pre>
<pre class="r"><code>people &lt;- read_excel(&quot;data/Superstore.xls&quot;,
                     sheet = &quot;People&quot;)

tail(people)</code></pre>
<pre><code>## # A tibble: 4 x 2
##   Person            Region 
##   &lt;chr&gt;             &lt;chr&gt;  
## 1 Anna Andreadi     West   
## 2 Chuck Magee       East   
## 3 Kelly Williams    Central
## 4 Cassandra Brandow South</code></pre>
<p>A few things to note about <code>read_excel</code></p>
<ul>
<li><strong>VERY IMPORTANT</strong> Sometimes the function fails if you have the file open. Make sure the excel file is closed before trying to read it into R!</li>
<li>The function will inform you of parsing issues/column type coercion.</li>
<li>By default, the function will return a <code>tibble</code> and not a <code>data.frame</code>.</li>
</ul>
</div>
</div>
<div id="wrapping-up" class="section level2">
<h2>Wrapping Up</h2>
<p>In this post, we’ve looked at a few different ways of getting data into R from flat files. For nice flat files, it’s pretty straightforward to get your data into R. If your data isn’t so nice, you can generally be successful using the <code>fread</code> or <code>read_csv</code> functions, but you’ll need to be very aware of the structure of your data, as well as the arguments for whatever function decide to use.</p>
</div>
<div id="further-reading" class="section level2">
<h2>Further Reading</h2>
<p>Here are the links I’ve referenced.</p>
<div id="articles" class="section level4">
<h4>Articles</h4>
<ul>
<li><a href="https://simplystatistics.org/2015/07/24/stringsasfactors-an-unauthorized-biography/">stringsAsFactors: An unauthorized biography</a></li>
<li><a href="https://github.com/Rdatatable/data.table/wiki/Convenience-features-of-fread">Convenience features of fread</a></li>
<li><a href="https://jozef.io/r917-fread-comparisons/">How data.table’s fread can save you a lot of time and memory, and take input from shell commands</a></li>
</ul>
</div>
<div id="package-sites" class="section level4">
<h4>Package Sites</h4>
<ul>
<li><a href="https://readr.tidyverse.org/"><strong><code>readr</code></strong></a></li>
<li><a href="https://tibble.tidyverse.org/"><strong><code>tibble</code></strong></a></li>
<li><a href="https://rdatatable.gitlab.io/data.table/"><strong><code>data.table</code></strong></a></li>
<li><a href="https://readxl.tidyverse.org/index.html"><strong><code>readxl</code></strong></a></li>
</ul>
</div>
<div id="function-documentation" class="section level4">
<h4>Function Documentation</h4>
<ul>
<li><a href="https://stat.ethz.ch/R-manual/R-devel/library/utils/html/read.table.html"><code>read.table</code></a></li>
<li><a href="https://readr.tidyverse.org/reference/read_delim.html"><code>readr::read_delim</code></a></li>
<li><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html"><code>data.table::fread</code></a></li>
<li><a href="https://readxl.tidyverse.org/reference/read_excel.html"><code>readxl::read_excel</code></a></li>
</ul>
</div>
</div>
<div id="session-information" class="section level2">
<h2>Session Information</h2>
<pre class="r"><code>sessionInfo()</code></pre>
<pre><code>## R version 3.6.0 (2019-04-26)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 18362)
## 
## Matrix products: default
## 
## locale:
## [1] LC_COLLATE=English_United States.1252 
## [2] LC_CTYPE=English_United States.1252   
## [3] LC_MONETARY=English_United States.1252
## [4] LC_NUMERIC=C                          
## [5] LC_TIME=English_United States.1252    
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] readxl_1.3.1      data.table_1.12.2 readr_1.3.1      
## 
## loaded via a namespace (and not attached):
##  [1] Rcpp_1.0.1       knitr_1.23       magrittr_1.5     hms_0.4.2       
##  [5] R6_2.4.0         rlang_0.4.0      fansi_0.4.0      stringr_1.4.0   
##  [9] tools_3.6.0      xfun_0.8         utf8_1.1.4       cli_1.1.0       
## [13] htmltools_0.3.6  assertthat_0.2.1 yaml_2.2.0       digest_0.6.19   
## [17] tibble_2.1.3     crayon_1.3.4     bookdown_0.11    vctrs_0.1.0     
## [21] zeallot_0.1.0    evaluate_0.14    rmarkdown_1.13   blogdown_0.13   
## [25] stringi_1.4.3    compiler_3.6.0   pillar_1.4.1     cellranger_1.1.0
## [29] backports_1.1.4  pkgconfig_2.0.2</code></pre>
</div>


        
          <div class="blog-tags">
            
              
              <a href="/tags/data-analysis/">data-analysis</a>&nbsp;
            
              
              <a href="/tags/data-science/">data-science</a>&nbsp;
            
              
              <a href="/tags/r/">r</a>&nbsp;
            
          </div>
        

        
            <hr/>
            <section id="social-share">
              <ul class="list-inline footer-links">
                


<li>
    <a href="//twitter.com/share?url=%2fpost%2fa-brief-overview-on-ways-to-read-data-into-r%2f&amp;text=An%20Introduction%20to%20Reading%20Data%20into%20R&amp;via="
       target="_blank" alt="" title="Share on Twitter">
        <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
    </a>
</li>


<li>
    <a href="//www.facebook.com/sharer/sharer.php?u=%2fpost%2fa-brief-overview-on-ways-to-read-data-into-r%2f" target="_blank" title="Share on Facebook">
        <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
              </span>
    </a>
</li>


<li>
    <a href="//www.linkedin.com/shareArticle?url=%2fpost%2fa-brief-overview-on-ways-to-read-data-into-r%2f&amp;title=An%20Introduction%20to%20Reading%20Data%20into%20R" target="_blank"
       title="Share on LinkedIn">
         <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
              </span>
    </a>
</li>


              </ul>
            </section>
        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="/post/quantifying-home-field-advantage-in-the-nfl-using-linear-models-in-r/" data-toggle="tooltip" data-placement="top" title="Quantifying Home Field Advantage in the NFL Using Linear Models in R">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="/post/an-introduction-to-the-data-table-package/" data-toggle="tooltip" data-placement="top" title="An Introduction to the data.table Package">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      
        
          <div class="disqus-comments">
            <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "bgstieber-github-io" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          </div>
        
        
      

    </div>
  </div>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="https://github.com/bgstieber" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://linkedin.com/in/brad-stieber-2227b2131" title="LinkedIn">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://stackoverflow.com/users/5619526/bouncyball" title="StackOverflow">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            
            <a href="/index.xml" title="RSS">
            
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              Brad Stieber
            
          

          &nbsp;&bull;&nbsp;
          2020

          
            &nbsp;&bull;&nbsp;
            <a href="/">Brad Stieber</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.41</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha384-dq1/gEHSxPZQ7DdrM82ID4YVol9BYyU7GbWlIwnwyPzotpoc57wDw/guX8EaYGPx" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="/js/main.js"></script>
<script src="/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script> renderMathInElement(document.body); </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script>
<script src="/js/load-photoswipe.js"></script>






  </body>
</html>

